# Виджет банковских операций клиента 

## Описание: Проект "МойВиджет" - это приложение на Python для банковских операций клиента.

1. в проекте появился  функционал по сортировке банковских операций клиента
2. в модуле widget.py создана функция mask_account_card, которая принимает строку с именем владельца и номером карты или счётом и возвращает имя владельца и замаскированный номер карты или счёт. 
3. в пакете src разработана функция filter_by_state, которая принимает список словарей и опционально значение для ключа state (по умолчанию «EXECUTED»). Функция возвращает новый список словарей, содержащий только те словари, у которых ключ state соответствует указанному значению.
4. в пакете src разработана функция sort_by_date, которая принимает список словарей и опциональное значение для ключа date (по умолчанию «CANCELED»). Функция возвращает новый список словарей, содержащий только те словари, у которых ключ date соответствует указанному значению. 
5. в пакет src добавлен модуль generators, в котором разработаны три функции-генераторы для обработки данных:
 - функция filter_by_currency принимает список словарей с транзакциями и возвращает итератор, где валюта операции соответствует USD;
 - функция transaction_descriptions принимает список словарей с транзакциями и возвращает описание каждой операции по очереди;
 - функция card_number_generator принимает начальное и конечное значения для генерации диапазона номеров банковских карт.
6. в пакет src добавлен модуль decorators, в котором разработан декоратор log, который логирует начало и конец выполнения функции
7. Добавлен файл external.api.py, где описана функция которая конвертирует сумму транзакции в рубли.
8. Добавлен файл utils.py, где создана функция, которая читает JSON-файл и возвращает список словарей с данными о финансовых транзакциях.

## Установка:

 - Клонируйте репозиторий: git clone git@github.com:Ekaterina-RA/Homework_10.1.git
 - Установите необходимые зависимости: poetry install --group lint, poetry pytest
 - 
## Тестирование: 

1. Написаны тесты для функций в пакете src/generators/masks/processing/widget с помощью библиотеки pytest. Все тесты и их фикстуры находятся в пакете tests
2. Тесты включают в себя использование тестового фреймворка фикстура.
3. Применена параметризация тестов, которая позволила проверить работу функций в разных условиях и с разными тестовыми данными.
4. Написаны тесты для декоратора log с применением фикстуры capsys.
5. Написаны тесты для функций external_api и read_json_transactions с использованием Mock  и patch
6. Для запуска и проверки успешной работы всех тестов выполните команду: pytest 


